<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Your Stay</title>
    <style>
        /* نفس التنسيقات السابقة */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #cce7ff, #e6f3ff);
            color: #333;
            direction: ltr;
        }

        .header {
            background-color: #0077B6;
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .header .logo {
            width: 100px;
            height: auto;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }

        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: bold;
        }

        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .menu-btn {
            font-size: 25px;
            background: none;
            border: none;
            color: #005f8a;
            cursor: pointer;
        }

        h1 {
            font-size: 22px;
            color: #005f8a;
        }

        .location {
            font-size: 14px;
            color: #555555;
        }

        .icons {
            display: flex;
            gap: 15px;
        }

        .profile-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 2px solid #005f8a;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .profile-icon:hover {
            transform: scale(1.1);
        }

        .search-bar {
            margin-top: 15px;
            text-align: center;
        }

        .search-bar input {
            width: 90%;
            max-width: 600px;
            padding: 12px 20px;
            border-radius: 30px;
            border: 1px solid #cccccc;
            outline: none;
            font-size: 16px;
            background-color: #ffffff;
            transition: box-shadow 0.3s ease;
        }

        .search-bar input:focus {
            box-shadow: 0 0 8px rgba(65, 52, 188, 0.5);
        }

        .filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .filter-btn {
            padding: 10px 25px;
            background-color: #ffffff;
            color: #0077B6;
            border: 2px solid #005f8a;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background-color: #005f8a;
            color: #ffffff;
        }

        .recommended {
            margin-top: 40px;
            text-align: center;
        }

        .recommended h2 {
            color: #005f8a;
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .recommended-items {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .item {
            text-align: center;
            background-color: #ffffff;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 300px;
        }

        .item img {
            width: 100%;
            height: 150px;
            border-radius: 10px;
            object-fit: cover;
            margin-bottom: 10px;
        }

        .item-title {
            font-size: 18px;
            font-weight: bold;
            color: #333333;
            margin-top: 10px;
        }

        .item p {
            font-size: 14px;
            line-height: 1.5;
            color: #555;
            margin: 10px 0;
        }

        .item p strong {
            color: #333;
        }

        .hidden {
            display: none;
        }

        .side-nav {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100%;
            background-color: #005f8a;
            color: white;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
            transition: left 0.3s ease;
            z-index: 1000;
            padding: 20px;
        }

        .side-nav.active {
            left: 0;
        }

        .side-nav .close-btn {
            font-size: 20px;
            cursor: pointer;
            text-align: right;
            color: #ffffff;
        }

        .side-nav a {
            display: block;
            text-decoration: none;
            color: white;
            padding: 10px 0;
            transition: background 0.3s;
        }

        .side-nav a:hover {
            background-color: #005f8a;
        }

        footer {
            margin-top: 40px;
            background-color: #005f8a;
            color: #ffffff;
            padding: 10px;
            text-align: center;
        }

        footer p {
            margin: 0;
            font-size: 14px;
        }

        @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
        }

        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 10px;
            animation: bounceAndRotate 2s infinite;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .logo:hover {
            transform: scale(1.1);
        }

        @keyframes bounceAndRotate {
        0%, 100% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-10px) rotate(5deg);
        }
        }

        .filter-btn {
            padding: 10px 20px;
            background-color: #0077B6;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .filter-btn.active {
            background-color: #005f8a;
        }

        .booking-container, .payment-container {
            max-width: 400px;
            margin: 40px auto;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
            display: none; 
        }

        .step-indicator {
            font-size: 14px;
            color: #888;
            margin-bottom: 10px;
        }

        .step-indicator span {
            font-weight: bold;
        }

        .booking-container h1, .payment-container h1 {
            font-size: 22px;
            margin-bottom: 10px;
            color: #333;
        }

        .description {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }

        .event-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .event-image {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            object-fit: cover;
        }

        .event-details h2 {
            font-size: 16px;
            margin: 0;
            color: #333;
        }

        .event-details p {
            margin: 0;
            font-size: 12px;
            color: #999;
        }

        .view-details {
            font-size: 12px;
            color: #0077b6;
            text-decoration: none;
            font-weight: bold;
        }

        .input-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .input-row input[type="date"],
        .input-row input[type="number"] {
            flex: 1;
            padding: 10px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group input[type="text"],
        .form-group input[type="tel"] {
            width: 100%;
            padding: 10px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        .note {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .buttons button {
            flex: 0 0 48%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        .back-btn {
            background: #ddd;
            color: #333;
        }

        .continue-btn {
            background: #0077b6;
            color: #fff;
        }

        .payment-container h1 {
            margin-bottom: 20px;
        }

        .payment-container .form-group {
            margin-bottom: 15px;
        }

        .payment-container .form-group input,
        .payment-container .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 14px;
        }

        .price-info {
            font-size: 16px;
            color: #333;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #0077b6;
            color: #fff;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 18px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            z-index: 9999;
        }

        /* البطاقة */
        .card {
            color: white;
            border-radius: 15px;
            padding: 15px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 140px;
            margin-bottom: 20px;
        }

        .card.alrajhi {
            background: linear-gradient(to right, #004AAD, #004AAD);
        }

        .card.riyad {
            background: linear-gradient(to right, #2f4054, #6a7b89);
        }

        .card.alahli {
            background: linear-gradient(to right, #00754a, #2abf7e);
        }

        .card.albilad {
            background: linear-gradient(to right, #b87e1f, #e8aa53);
        }

        .bank-name {
            font-size: 14px;
        }

        .card-number {
            font-size: 18px;
            letter-spacing: 2px;
            margin-top: 10px;
        }

        .card-footer {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            font-size: 14px;
            position: relative;
        }

        .card-footer .name {
            font-weight: bold;
        }

        .card-footer .logo {
            position: absolute;
            top: 10px;
            right: 10px;
            height: 30px;
        }

        .card-footer .logo img {
            height: 30px;
        }

    </style>
</head>
<body>
    <!-- Page content -->
    <header>
        <div class="top-nav">
            <button class="menu-btn" aria-label="Open menu">&#9776;</button>
            <h1>NEOMISM</h1>
            <img class="logo" src="logo1.png" alt="Neomism Logo">
            <div class="icons">
                <a href="notification.html" aria-label="Notifications">
                    <img src="bell.png" alt="Notifications" class="profile-icon">
                </a>
                <a href="Profile.html" aria-label="Profile">
                    <img src="user.png" alt="Profile" class="profile-icon">
                </a>
            </div>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Search Destination" aria-label="Search">
        </div>
    </header>

    <nav class="side-nav" aria-label="Side navigation">
        <button class="close-btn" aria-label="Close menu">&times;</button>
        <h3>Menu</h3>
        <ul>
            <li><a href="Profile.html">Profile</a></li>
            <li><a href="setting.html">Settings</a></li>
            <li><a href="help.html">Help</a></li>
            <li><a href="login.html">Logout</a></li>
        </ul>
    </nav>

    <!-- Filters Section -->
    <main>
        <section class="filters" aria-label="Filter options">
            <button class="filter-btn active" data-filter="all">ALL</button>
            <button class="filter-btn" data-filter="hotels">Hotels</button>
            <button class="filter-btn" data-filter="islands">Islands</button>
            <button class="filter-btn" data-filter="restaurants">Restaurants</button>
        </section>

        <!-- Recommended Items Section -->
        <section class="recommended" aria-label="Recommended items">
            <h2>Recommended</h2>
            <div id="recommended-items" class="recommended-items">
                <!-- العناصر الموصى بها ستُضاف هنا ديناميكيًا بواسطة JavaScript -->
            </div>
        </section>

        <!-- Booking Section (Step 1/3) -->
        <div class="booking-container" id="bookingSection" aria-hidden="true" hidden>
            <div class="step-indicator">Step <span>1</span> / 3</div>
            <h1>BOOK EVENTS</h1>
            <p class="description">Please fill the required identity and detail booking below</p>
            
            <div class="event-info">
                <img src="" alt="Event Image" class="event-image" id="eventImage">
                <div class="event-details">
                    <h2 id="eventName">Event Name</h2>
                    <p id="eventLocation">Event Location</p>
                </div>
                <!-- إذا كان "View Details" يقوم بوظيفة معينة، قد يكون من الأفضل استخدام زر -->
                <button class="view-details" onclick="viewDetails()">View Details</button>
            </div>
            
            <div class="price-info" id="priceInfo">Price: $0</div>

            <div class="input-row">
                <input type="date" placeholder="Choose Date" id="bookingDate" aria-label="Choose Date">
                <input type="number" placeholder="Number of Guests" min="1" value="1" id="guestsNumber" aria-label="Number of Guests">
            </div>

            <div class="form-group">
                <input type="text" placeholder="Enter Full Name" id="fullName" aria-label="Full Name" required>
            </div>

            <div class="form-group">
                <input type="tel" placeholder="Enter Phone Number" id="phoneNumber" aria-label="Phone Number" required>
                <p class="note">Verification code will be sent to Phone Number above</p>
            </div>

            <div class="buttons">
                <button class="back-btn" id="backBtn">Back</button>
                <button class="continue-btn" id="continueBtn">Continue</button>
            </div>
        </div>

        <!-- Payment Section (Step 2/3) -->
        <div class="payment-container" id="paymentSection" aria-hidden="true" hidden>
            <div class="step-indicator">Step <span>2</span> / 3</div>
            <h1>PAYMENT</h1>
            <p class="description">Please enter your payment details below</p>

            <!-- Dynamic Credit Card Display -->
            <div id="dynamic-card" class="card" style="background: linear-gradient(to right, #004AAD, #004AAD);">
                <div class="bank-name" id="bank-name-display">Al Rajhi Bank</div>
                <div class="card-number" id="display-card-number">0000 0000 0000 0000</div>
                <div class="card-footer">
                    <div class="name" id="display-card-name">Name on Card</div>
                    <div class="logo">
                        <img id="card-logo" src="" alt="Bank Logo" style="height: 30px;">
                    </div>
                    <div id="display-expiry-date" class="expiry-date">MM/YY</div>
                    <div id="display-cvc" class="cvc">CVC</div>
                </div>
            </div>

            <!-- Payment Form -->
            <form>
                <div class="form-group">
                    <label for="bankName" class="sr-only">Select Bank</label>
                    <select id="bankName" aria-label="Select Bank" required>
                        <option value="">Select Bank</option>
                        <option value="alrajhi">Al Rajhi</option>
                        <option value="alahli">AlAhli</option>
                        <option value="albilad">Albilad</option>
                        <option value="riyad">AlRiyadh</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="cardHolder" class="sr-only">Card Holder Name</label>
                    <input type="text" placeholder="Card Holder Name" id="cardHolder" pattern="[A-Za-z ]+" aria-label="Card Holder Name" required>
                </div>
                <div class="form-group">
                    <label for="cardNumber" class="sr-only">Card Number</label>
                    <input type="text" placeholder="Card Number" id="cardNumber" maxlength="16" aria-label="Card Number" required>
                </div>
                <div class="form-group">
                    <label for="expiryDate" class="sr-only">Expiry Date</label>
                    <input type="text" placeholder="Expiry Date (MM/YY)" id="expiryDate" maxlength="5" aria-label="Expiry Date" required>
                </div>
                <div class="form-group">
                    <label for="cvv" class="sr-only">CVC</label>
                    <input type="text" placeholder="CVC" id="cvv" pattern="[0-9]{3,4}" maxlength="4" aria-label="CVC" required>
                </div>
            </form>

            <div class="buttons">
                <button class="back-btn" id="paymentBackBtn">Back</button>
                <button class="continue-btn" id="payBtn">Pay</button>
            </div>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" disabled>
          </div>
        <!-- Success Message -->
        <div id="successMessage" class="success-message hidden" role="alert" aria-live="assertive">
            Booking Successful!
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Plan Your Stay | All rights reserved.</p>
    </footer>

    <script> 
       // استرجاع البريد الإلكتروني من localStorage
        const storedEmail = localStorage.getItem("userEmail");
        
        // التأكد من وجود البريد الإلكتروني
        if (storedEmail) {
            document.getElementById("email").value = storedEmail; // عرضه في حقل البريد الإلكتروني
        } else {
            alert("لم يتم العثور على بريد مسجل! يرجى تسجيل الدخول أولًا.");
            window.location.href = "login.html"; // إعادة التوجيه لصفحة تسجيل الدخول
        }
        
        // إضافة البريد الإلكتروني إلى بيانات الحجز
        bookingData.email = storedEmail; </script>
<!-- سكريبت JavaScript مع التعليقات والتعديلات المنظفة -->
<script type="module">
    // استيراد الدوال اللازمة من مكتبات Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-analytics.js";
    import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

    // إعدادات Firebase الخاصة بمشروعي "fani-betak" و "neom-web"
    const firebaseConfigFani = {
        apiKey: "AIzaSyC14xc6J0t_AI2RP2a_kuBOMI47hWqG3dg",
        authDomain: "fani-betak.firebaseapp.com",
        projectId: "fani-betak",
        storageBucket: "fani-betak.appspot.com",
        messagingSenderId: "346650563668",
        appId: "1:346650563668:web:2fb84733de91dea06589c1",
        measurementId: "G-YYZ6NS34SH"
    };

    const firebaseConfigNeom = {
        apiKey: "AIzaSyB6pzBFkIF6RV9rDSrX2C-Sa2xI2hBiVrE",
        authDomain: "neom-web.firebaseapp.com",
        databaseURL: "https://neom-web-default-rtdb.firebaseio.com",
        projectId: "neom-web",
        storageBucket: "neom-web.firebasestorage.app",
        messagingSenderId: "881751642763",
        appId: "1:881751642763:web:d961fbe97db49c90c2ba8e",
        measurementId: "G-4MLT5VWXNT"
    };

    // تهيئة مشروع fani-betak
    const appFani = initializeApp(firebaseConfigFani, "FaniBetak");
    const analytics = getAnalytics(appFani);
    const dbFani = getFirestore(appFani);

    // تهيئة مشروع neom-web
    const appNeom = initializeApp(firebaseConfigNeom, "NeomApp");
    const dbNeom = getFirestore(appNeom);

  // روابط شعارات البنوك بصيغة Base64
    const bankLogos = {
        alrajhi: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYMAAACCCAMAAAAKcUrhAAAAmVBMVEUbQpf///8AK48XQJYANZIAOJNHYaUAMpEPPJXy9PkWP5YKOpQALY/29/r5+v13h7hfdK5sfrSjrs7m6PGPnMSps9HEy98AKY6Xo8cALZDN0+QAM5E0Up6GlcDd4e2/xty3v9grTZ1Zbqx+jrycp8ohR5kAJI3e4u1tf7Rjd7A+WqLByN0AIIxRaanU2ec4VqAAEYgAGooABYeC4iyVAAATeElEQVR4nO2ba4OiOBZAGZOQOHRPb4Gwz7IVBG3Bnt2d2ef//2F7b0IAeQiUUo/Ze76URKDMMbm5JNFxCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIJ4I8Kff7zJX/82+5ZR7LoDb2XmLfiTTLnTNnbjoFOauHE2+0PdR/j3n27ybTXlLpmbrKsDXwlv4LxIiTx0nM3wGVdsFVddS7lQmylXP5DwL08/DPP07XmSpUOz2r7kx4HzIsnwvI3kEy2xD2Dp6ZfV6suUuyxk6dxraZ0kr97jbljClvRlkqUsafa4+yyF57N92W/pDbhh6emXZ2hKt3tckKbndtl9lhKpRFi+/gCWnr6tVqOWNifVGc9qS9kldqHGEfwxBeOWCsXi+LYlN75k9lUcTajj/Qxa0i1p1BJUe78zFJuyQrWlSHEzpPG8On3E0l5t64N+Sx630dsTyp9e1TsYsvT0q5bUY6lw3ToGQbWZKJHSlDcsgRS0ZNw4/ZY2kBTVvdZjjX+FlhrS7Clclpb2XB5eWO95DFjCwD1gyZUirw7QEjcwxmSMZTMtFZLLpqUsy+whWuqEvYalI5dv2ZZMTBqwxBtVxGq7kFADRxCmMGDMtSSYqFXkUp1Ou/LgfVuqWtIES7x61sg40wd3Wdqt1+vEhuR3benp19VquqV6jEs4vzh3WrpiLC69paVGS5pnCSq/d2Zb8gWTaf+HmxC938pSHZNeYAn1zLQEZaLo/3DbkR73dpZsCnCPJWazyimWzjhM9j+YBQP5kiwD12KW/vH7Fi1LzZg0ZInVOQ1U+whPn5p1zK2lXJet4dTSUlkQs56s8gI3FEd33SXB8aBTmjPu2lcLWfr0z8/X/KFl6Y/PI5bWgqkqjjTyJUyZrKUy04Tql5bqpMoUNC2dsZhz0QVzsG55XcgWs/S51VZmW0Ixx3PjoLbEhbakGgX5tSXeNwt3vkjJX8ZCTyj3W3LgK+TyYnpCDH3KbYD5UtQuQEt1QYhTm60Z3bRYuy9jmafdB1jC9mO7CHSyoTnump1g+yXqshwPsOSknhJVm5cjltLowBiftBjwfniEJewhSdXm+3KdFPoj5OLrJHWKEz7fLdMxivV6mbndx1gaIzoJ4TgKp/ELiVHs0dUwePL9Ru8JRDDMOY7k0IYOLD/uHlwJy1GoZeaXXseSWZ2M9fJiGI6f/0KSpWZ0X8fSR4csTeF+S6HlQZ/o0fd7BPdbcnODd3QfshAN4b2633sxNdfSqmsJHzdN9i1Zma5E+0s840Ncne5LZm8o5YRgHPRuRHks8yx96bMET+pSCnhAhXqVswNTF/5LNqo5V4lTCFLq+5nlhdsEJ37qTmA+lralVcdSe2qlfQewlG8AP8Gv38y3HU4y7/yrYa5ndCHt9OF+h4RxxsZlB73TvI+lZen5e2uq8qd//alF+w4utxO2gcfKqaa08Oekd21L5epAANrFqIDXtwSS2pb+PHaHxozuQbIXLa4OWMIJPjmwnFLz6pa6kuZZyuToZGGYZlnaHLrOWZT6ot8SzuDW10WN68JttbnltS31SJpnqYDvXo9KdldJ7Hk6O4hyb2/KpZJSicTWt/DgWArWawmlm60GaSzwOuniG1/dS67wkK3xNpWlII7jhWZkGpb6JE2zZBeScFpfD8p2ivZYbm+Ap129grAvswbhaU3BUQ9kGPWvxzg3SRLXE0yUCUKC2QGOoRimvp5sqiBxOthaCo9C5AulBLWlXkmTLLE80bWCqpTffbnG5Oy5MJakWWfBBrD3QJnUs1Ae9CjFPCbblux2DJtFXfA6VIozoaGC/6MgWQDb69rSBVrkUj2vstQvaZqlqlayrNaApXCv9zQFF5MxFNC39CacgxiwxHOTL8UHXX+MU6HzVZl+neUMt0MFZikTk9vRSP9SrKUBSRMtCalXgTw7wA21JQe3SW5DCDgCXnlmH0F3jGMXCDHxHltLvRi+PQdbiauWYMnkGzikWkvQJ9XAuvkDKC0NSZrY4wrfh1FbVLu9hiyFhSeMUanXs2VmT+8d43xoO6XHvTDZOHQubEsmKwM/xlKwk/Zei2AsDUqaEb33vP42h3pcjtO51lIKNdva03st4Tegl7xjBYFbX9e0tLWWOLQkueSeb21pWNKMTAC6Q7WAVFuSTUsxBFjX3xQx15ZsbYctFWbdGFoKjwt4BuIdSwFaEnDeossyaOn534OS5uRLmCmXgamyxMQO/xpLAWdCJ53YiuBQ2M0lg5aMFhgLjQMznHUtqWCj7PC6CGDpRkual1XmzG4JsZag0egUxlg620CUaUv4rtlcEvVbCn0Yt+CpObR2By2dMZKr3WOU9PDp8/P3H278qGKOpUjZlV1raYfVdJMY/IGlELPH6LxNoRgtZZD4CNePDjFvjXGxC2PcJccxDlvbES4/nIP0IAYt4cZwObDt6X4+3epuMy3pYKsbh7UUKJNMMW3JWWO14eFC6Oita4bRHLPFa0uszJeY2WN/QJ1KKdGN3kGVVULwWmidCSx9v/1LrwmW6p3MgRKChU7j1zoZk3b3jD5XCbPrRgr99oZLsw2nMR1VbVGBnIGXrWOHm1D0ddBsvp7Kyb7tiZ+CehZupxb7cdN/fjfCf8fuUDR+mbOBJxWdFtdlWbHe+TvOjIZ0514ucVLYlCGMkvhycRO/zgizxO4SK+oMaFvgdW6RwXcQuol+6nXO8CLUh4H9JO5i6fcrAIFooUXv3wRZkZ7P6VVeTnTwFQQUHa2Xe8j6+PhKzx4ttcvhN0Lq7r38GBcfOagSBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQ/2/8D7IN01sB7GILAAAAAElFTkSuQmCC",
        riyad: "data:image/png;base64,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",
        alahli: "data:image/png;base64,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",
        albilad: "data:image/png;base64,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"
    };

    // ألوان الخلفيات لكل بنك
    const bankColors = {
        alrajhi: "linear-gradient(to right, #004AAD, #004AAD)",
        riyad: "linear-gradient(to right, #2f4054, #6a7b89)",
        alahli: "linear-gradient(to right, #00754a, #2abf7e)",
        albilad: "linear-gradient(to right, #b87e1f, #e8aa53)"
    };

    // المراجع للعناصر في الصفحة
    const menuBtn = document.querySelector('.menu-btn'); // زر القائمة الجانبية
    const sideNav = document.querySelector('.side-nav'); // القائمة الجانبية
    const closeBtn = document.querySelector('.close-btn'); // زر إغلاق القائمة الجانبية
    const filterBtns = document.querySelectorAll('.filter-btn'); // أزرار الفلترة
    const itemsContainer = document.getElementById('recommended-items'); // حاوية العناصر الموصى بها
    const bookingSection = document.getElementById('bookingSection'); // قسم الحجز
    const paymentSection = document.getElementById('paymentSection'); // قسم الدفع
    const successMessage = document.getElementById('successMessage'); // رسالة نجاح الحجز

    let selectedPrice = 0; // المتغير لحفظ السعر المختار
    let bookingData = {};  // كائن لحفظ بيانات الحجز

    // إضافة بريد إلكتروني للاختبار في sessionStorage في حال عدم وجوده
    // يفترض في الإنتاج الحصول على البريد من تسجيل الدخول عبر Firebase Auth
    if (!sessionStorage.getItem('BOOKINGEmail')) {
        sessionStorage.setItem('BOOKINGEmail', 'user@example.com'); // استبدل 'user@example.com' بالبريد الإلكتروني الحقيقي
    }

    // إظهار القائمة الجانبية عند الضغط على زر القائمة
    menuBtn.addEventListener('click', () => sideNav.classList.add('active'));
    // إخفاء القائمة الجانبية عند الضغط على زر الإغلاق
    closeBtn.addEventListener('click', () => sideNav.classList.remove('active'));

    // إضافة حدث لكل زر فلترة
    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const filter = btn.dataset.filter; // الحصول على نوع الفلتر
            filterBtns.forEach(button => button.classList.remove('active')); // إزالة النشط من جميع الأزرار
            btn.classList.add('active'); // تعيين النشط للزر المختار

            const items = itemsContainer.querySelectorAll('.item'); // الحصول على جميع العناصر
            items.forEach(item => {
                // إظهار أو إخفاء العنصر بناءً على نوع الفلتر
                item.style.display = (filter === 'all' || item.dataset.category === filter) ? 'block' : 'none';
            });
        });
    });

// جلب البيانات من مجموعات مختلفة (Hotels, Restaurants, Islands) في Firestore (fani-betak)
async function fetchCategories() {
    const container = document.getElementById('recommended-items'); // الحصول على حاوية العناصر الموصى بها
    container.innerHTML = ''; // مسح المحتوى الحالي
    const categories = ['Hotels', 'Restaurants', 'Islands']; // تعريف المجموعات المراد جلبها

    for (const category of categories) { // المرور على كل مجموعة
        try {
            // جلب المستندات من المجموعة في Firestore
            const querySnapshot = await getDocs(collection(dbFani, category));
            querySnapshot.forEach((docItem) => { // المرور على كل مستند
                const data = docItem.data(); // الحصول على بيانات المستند
                const imageUrl = data.images || 'https://via.placeholder.com/150'; // الحصول على صورة العنصر أو وضع صورة افتراضية
                const price = data.price || 0; // الحصول على سعر العنصر أو وضع 0

                // بناء محتوى العنصر بصيغة HTML
                const itemHtml = `
                    <div class="item" data-category="${category.toLowerCase()}">
                        <img src="${imageUrl}" alt="${data.name || 'No Name'}">
                        <h3>${data.name || 'No Name'}</h3>
                        <p>${data.description || 'No Description Available'}</p>
                        <p><strong>Location:</strong> ${data.location || 'No Location'}</p>
                        <p><strong>Price:</strong> $${price}</p>
                        <p><strong>Email:</strong> ${data.email || 'No Email Available'}</p>
                        <button class="book-now-btn" 
                                data-ename="${data.name}" 
                                data-eloc="${data.location}" 
                                data-image="${imageUrl}" 
                                data-price="${price}">
                            Book Now
                        </button>
                    </div>
                `;
                container.innerHTML += itemHtml; // إضافة العنصر إلى الحاوية
            });
        } catch (error) {
            console.error(`Error fetching ${category}:`, error);

        }
    }
}


    // تعريف المتغيرات المستخدمة لتحديث السعر بناءً على عدد الضيوف
    const guestsNumber = document.getElementById('guestsNumber'); // مدخل عدد الضيوف

    // عند تغيير عدد الضيوف، تحديث السعر الإجمالي
    guestsNumber.addEventListener('input', updateTotalPrice);

    // عند الضغط على زر "Book Now"
    document.addEventListener('click', (event) => {
        if(event.target.classList.contains('book-now-btn')){ // التحقق إذا كان الزر هو "Book Now"
            const button = event.target;
            const eventName = button.getAttribute('data-ename') || ''; // الحصول على اسم الحدث
            const eventLocation = button.getAttribute('data-eloc') || ''; // الحصول على موقع الحدث
            const eventImage = button.getAttribute('data-image') || ''; // الحصول على صورة الحدث
            selectedPrice = parseFloat(button.getAttribute('data-price')) || 0; // الحصول على السعر

            // عرض المعلومات في قسم الحجز
            document.getElementById('eventName').innerText = eventName;
            document.getElementById('eventLocation').innerText = eventLocation;
            document.getElementById('eventImage').src = eventImage;

            // تحديث السعر الإجمالي
            updateTotalPrice();

            // إظهار قسم الحجز وإخفاء التوصيات والفلاتر
            bookingSection.style.display = 'block';
            document.querySelector('.recommended').style.display = 'none';
            document.querySelector('.filters').style.display = 'none';

            // حفظ المعلومات في كائن الحجز
            bookingData.eventName = eventName;
            bookingData.eventLocation = eventLocation;
            bookingData.basePrice = selectedPrice;
        }
    });
// دالة لتحديث السعر الإجمالي بناءً على عدد الضيوف
function updateTotalPrice() {
    const num = parseInt(guestsNumber.value) || 1; // الحصول على عدد الضيوف أو 1 إذا لم يتم إدخاله
    const total = selectedPrice * num; // حساب السعر الإجمالي
    document.getElementById('priceInfo').innerText = `Price: $${total}`; // عرض السعر الإجمالي
}


    // زر الرجوع من قسم الحجز إلى التوصيات
    document.getElementById('backBtn').addEventListener('click', () => {
        bookingSection.style.display = 'none'; // إخفاء قسم الحجز
        document.querySelector('.recommended').style.display = 'block'; // إظهار التوصيات
        document.querySelector('.filters').style.display = 'flex'; // إظهار الفلاتر
    });

    // زر المتابعة من قسم الحجز إلى قسم الدفع
    document.getElementById('continueBtn').addEventListener('click', () => {
        const fullName = document.getElementById('fullName').value.trim(); // الحصول على الاسم الكامل
        const phoneNumber = document.getElementById('phoneNumber').value.trim(); // الحصول على رقم الهاتف
        const date = document.getElementById('bookingDate').value; // الحصول على تاريخ الحجز
        const numGuests = parseInt(guestsNumber.value) || 1; // الحصول على عدد الضيوف
        const totalPrice = selectedPrice * numGuests; // حساب السعر الإجمالي

        // التحقق من إدخال جميع البيانات
        if(!fullName || !phoneNumber || !date){
            alert('Please fill all booking details'); // تنبيه المستخدم بملء جميع التفاصيل
            return; // إيقاف العملية إذا كانت البيانات غير كاملة
        }

        // حفظ البيانات في كائن الحجز
        bookingData.fullName = fullName;
        bookingData.phoneNumber = phoneNumber;
        bookingData.date = date;
        bookingData.numGuests = numGuests;
        bookingData.totalPrice = totalPrice;

        // إظهار قسم الدفع وإخفاء قسم الحجز
        bookingSection.style.display = 'none';
        paymentSection.style.display = 'block';
    });

    // زر الرجوع من قسم الدفع إلى قسم الحجز
    document.getElementById('paymentBackBtn').addEventListener('click', () => {
        paymentSection.style.display = 'none'; // إخفاء قسم الدفع
        bookingSection.style.display = 'block'; // إظهار قسم الحجز
    });
// زر الدفع
document.getElementById('payBtn').addEventListener('click', async (e) => {
    e.preventDefault(); // منع إعادة تحميل الصفحة عند الضغط على الزر

    // الحصول على مدخلات الدفع
    const bankName = document.getElementById('bankName');
    const cardHolder = document.getElementById('cardHolder');
    const cardNumber = document.getElementById('cardNumber');
    const cvv = document.getElementById('cvv');
    const expiryDate = document.getElementById('expiryDate');

    // التحقق من البيانات المدخلة
    if(!bankName.value){
        alert('Please select a bank'); // تنبيه المستخدم بضرورة اختيار بنك
        return;
    }

    if(!cardHolder.checkValidity()){
        alert('Card Holder Name must be letters only'); // تنبيه المستخدم إذا كان الاسم غير صالح
        return;
    }

    if(!/^\d{16}$/.test(cardNumber.value)){
        alert('Card Number must be 16 digits'); // تنبيه المستخدم إذا كان رقم البطاقة غير صالح
        return;
    }

    if(!cvv.checkValidity()){
        alert('CVV must be 3 or 4 digits'); // تنبيه المستخدم إذا كان الـ CVV غير صالح
        return;
    }

    if(!expiryDate.value){
        alert('Please enter expiry date'); // تنبيه المستخدم بضرورة إدخال تاريخ الانتهاء
        return;
    }

    try {
        const bookingStatus = "Pending"; // تحديد حالة الحجز كـ "قيد الانتظار"
        // استعادة الإيميل من sessionStorage
        const BOOKINGEmail = sessionStorage.getItem('BOOKINGEmail');

        if (!BOOKINGEmail) { // التحقق من وجود الإيميل في sessionStorage
            alert('البريد الإلكتروني غير موجود في الجلسة. يرجى تسجيل الدخول مرة أخرى.');
            return;
        }
        await addDoc(collection(dbNeom, 'BOOKING'), {
    event_name: bookingData.eventName, // اسم الحدث
    event_location: bookingData.eventLocation, // موقع الحدث
    date: bookingData.date, // تاريخ الحجز
    number_of_guests: bookingData.numGuests, // عدد الضيوف
    total_price: bookingData.totalPrice, // السعر الإجمالي
    full_name: bookingData.fullName, // الاسم الكامل
    phone_number: bookingData.phoneNumber, // رقم الهاتف
    bank_name: bankName.value, // اسم البنك
    card_holder: cardHolder.value, // اسم حامل البطاقة
    card_number_ends: cardNumber.value.slice(-4), // آخر 4 أرقام من رقم البطاقة
    payment_date: new Date(), // تاريخ الدفع
    booking_status: bookingStatus, // حالة الحجز
    email: storedEmail // الإيميل المسجل من localStorage
});



        // عرض رسالة نجاح الحجز
        successMessage.textContent = 'Booking Successful!';
        successMessage.classList.remove('hidden');

        // إعادة التوجيه بعد 3 ثواني
        setTimeout(() => {
            window.location.href = 'homepage.html';
        }, 3000);

    } catch (error) { // التعامل مع الأخطاء
        console.error('Error saving booking: ', error); // طباعة الخطأ في الكونسول
        alert('Failed to save booking. Please try again.'); // تنبيه المستخدم بفشل الحجز
    }
});


    // عند تحميل الصفحة، يتم جلب العناصر
    document.addEventListener('DOMContentLoaded', () => {
        fetchCategories(); // استدعاء دالة جلب الفئات
    });

    // تحديث البطاقة ديناميكيًا بناءً على مدخلات المستخدم
    const dynamicCard = document.getElementById('dynamic-card'); // البطاقة الديناميكية
    const bankNameSelect = document.getElementById('bankName'); // اختيار البنك
    const cardNameInput = document.getElementById('cardHolder'); // مدخل اسم حامل البطاقة
    const cardNumberInput = document.getElementById('cardNumber'); // مدخل رقم البطاقة
    const displayBankName = document.getElementById('bank-name-display'); // عرض اسم البنك في البطاقة
    const displayCardName = document.getElementById('display-card-name'); // عرض اسم حامل البطاقة في البطاقة
    const displayCardNumber = document.getElementById('display-card-number'); // عرض رقم البطاقة في البطاقة
    const expiryDateInput = document.getElementById('expiryDate'); // مدخل تاريخ الانتهاء
    const cvcInput = document.getElementById('cvv'); // مدخل CVC
    const displayExpiryDate = document.getElementById('display-expiry-date'); // عرض تاريخ الانتهاء في البطاقة
    const displayCVC = document.getElementById('display-cvc'); // عرض CVC في البطاقة
    const cardLogo = document.getElementById('card-logo'); // شعار البنك في البطاقة

    // عند اختيار البنك، تحديث شكل البطاقة
    bankNameSelect.addEventListener('change', (e) => {
        const selectedBank = e.target.value; // الحصول على البنك المختار
        dynamicCard.style.background = bankColors[selectedBank] || "linear-gradient(to right, #ffffff, #ffffff)"; // تغيير خلفية البطاقة بناءً على البنك أو خلفية افتراضية
        cardLogo.src = bankLogos[selectedBank] || ""; // تغيير شعار البنك في البطاقة أو تركه فارغًا إذا لم يكن محددًا
        displayBankName.textContent = bankNameSelect.options[bankNameSelect.selectedIndex].text || 'Bank Name'; // عرض اسم البنك في البطاقة أو نص افتراضي
    });

    // عند كتابة اسم حامل البطاقة، تحديث العرض في البطاقة
    cardNameInput.addEventListener('input', (e) => {
        const name = e.target.value.trim(); // الحصول على الاسم المكتوب
        displayCardName.textContent = name || 'Name on Card'; // عرض الاسم أو نص افتراضي
    });

    // عند كتابة رقم البطاقة، تحديث العرض بصيغة 4 أرقام مع مسافة
    cardNumberInput.addEventListener('input', (e) => {
        const value = e.target.value.replace(/\D/g, ''); // إزالة الأحرف غير الرقمية
        if (value.length <= 16) { // التأكد من أن الطول لا يتجاوز 16 رقمًا
            displayCardNumber.textContent = value.match(/.{1,4}/g)?.join(' ') || '0000 0000 0000 0000'; // عرض الرقم بصيغة 4 أرقام مع مسافة أو نص افتراضي
        }
    });

    // عند كتابة تاريخ الانتهاء، تحديث العرض في البطاقة
    expiryDateInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/[^0-9\/]/g, '').slice(0, 5); // تنقية المدخلات للسماح بالأرقام والشرطة المائلة فقط وتحديد الطول
        if (value.length === 2 && !value.includes('/')) {
            value += '/'; // إضافة الشرطة المائلة تلقائيًا بعد كتابة رقمين
        }
        e.target.value = value; // تحديث قيمة المدخل
        displayExpiryDate.textContent = value || 'MM/YY'; // عرض التاريخ أو نص افتراضي
    });

    // عند كتابة CVC، تحديث العرض في البطاقة
    cvcInput.addEventListener('input', (e) => {
        const value = e.target.value.replace(/\D/g, '').slice(0, 4); // إزالة الأحرف غير الرقمية وتحديد الطول
        e.target.value = value; // تحديث قيمة المدخل
        displayCVC.textContent = value || 'CVC'; // عرض الـ CVC أو نص افتراضي
    });
</script>

</body>
</html>
